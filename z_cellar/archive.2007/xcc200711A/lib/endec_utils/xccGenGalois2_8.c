/*-------------------------------UNCLASSIFIED---------------------------------*/
// File: xccGenGalois2_8.c
// Desc: This file contains the code for the xccGenGalois2_8 routine.
// Hist: When       Who  What
//       11/25/2002 ptb  Initial Code.
/*----------------------------------------------------------------------------*/
/* Preprocessor directives ---------------------------------------------------*/
/*----------------------------------------------------------------------------*/
/* Include files -------------------------------------------------------------*/
/*----------------------------------------------------------------------------*/
#include "endec_utils.h"

/* Constants -----------------------------------------------------------------*/
/*----------------------------------------------------------------------------*/
#define REGISTER_SIZE 9

/* Type defines --------------------------------------------------------------*/
/*----------------------------------------------------------------------------*/
/* Macros --------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*/
/* Prototypes ----------------------------------------------------------------*/
/*----------------------------------------------------------------------------*/
/* Routines ------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*/
//                                             _
//       |----|----|------------------------|-|_|
//       |    v    v                        v  ^  
//       v    +    +                        +  |                    
//       _    _    _    _    _    _    _    _  |
//      |_|->|_|->|_|->|_|->|_|->|_|->|_|->|_|-|
// 
//      genPoly = a^8 +  a^7 +  a^2 +  a +   1
//               1a^8 + 1a^7 + 0a^6 + 0a^5 + 0a^4 + 0a^3 + 0a^2 + 1a^1 + 1a^0
//                      1      0      0      0      0      0      1      1
//               10000011 = 0x83 = 131
/*----------------------------------------------------------------------------*/
VOID xccGenGalois2_8( UNT08 genPoly, UNT08 *galoisField ) //0x87
{
  INT32 ii;
  UNT08 reg;

  // Zero out the Galois Field.
  //------------------------------------------------------------------------------
  for(ii =0; ii < 256; ii++)galoisField[ii]=0;

  // First element will be 0.
  //------------------------------------------------------------------------------
  galoisField[0] = 0x00;

  // Second element will be 1 and the initial value of the register.
  //------------------------------------------------------------------------------
  galoisField[1] = reg = 0x01;

  // Implement the shift and feedback register.
  //------------------------------------------------------------------------------
  for(ii =2; ii < 256; ii++)
  {
    if( (reg&0x80) > 0 )
    {
      reg = reg << 1;
      reg = reg ^ genPoly;
    }
    else
    { 
      reg = reg << 1;
    }
    galoisField[ii] = reg;
  }
}

/* End preprocessor directives -----------------------------------------------*/
/*----------------------------------------------------------------------------*/
/*-------------------------------UNCLASSIFIED---------------------------------*/
